<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Gallery — Edmore Academy</title>

    <!-- GLOBAL SITE STYLES -->
    <link rel="stylesheet" href="styles.css">

    <!-- GALLERY PAGE CSS -->
    <style>
        /* PAGE WRAPPER */
        .wrap{
            max-width:1100px; 
            margin:40px auto; 
            padding:20px;
        }

        /* HEADER */
        .gallery-header{
            display:flex; 
            gap:12px; 
            align-items:center; 
            justify-content:space-between;
            margin-bottom:24px;
        }
        .gallery-header h1{
            font-size:2.4rem; 
            margin:0;
            color:#092c5c;
            font-family: "Playfair Display", serif;
        }
        .stats{
            font-size:0.9rem; 
            color:#666; 
            margin-left:12px;
        }

        /* SEARCH + FILTER CONTROLS */
        .controls{
            display:flex; 
            gap:8px; 
            align-items:center;
        }
        input[type="search"]{
            padding:8px 12px; 
            border-radius:999px; 
            border:1px solid #ddd; 
            min-width:200px;
            outline:none;
        }
        select, button{
            padding:8px 12px; 
            border-radius:8px; 
            border:1px solid #ddd; 
            background:#fff;
            cursor:pointer;
        }

        /* GALLERY GRID */
        .grid{
            display:grid;
            grid-template-columns:repeat(auto-fit, minmax(240px, 1fr));
            gap:20px;
            margin-top:20px;
        }
        .card{
            background:#fff; 
            border-radius:10px; 
            overflow:hidden;
            box-shadow:0 1px 3px rgba(0,0,0,0.08); 
            display:flex; 
            flex-direction:column;
            transition:transform .18s ease, box-shadow .18s ease;
            cursor:pointer;
        }
        .card:hover{ 
            transform:translateY(-6px); 
            box-shadow:0 8px 20px rgba(0,0,0,0.12); 
        }
        .thumb{
            width:100%; 
            height:0; 
            padding-bottom:66%; 
            position:relative;
            background:#eee;
        }
        .thumb img{
            position:absolute; 
            inset:0; 
            width:100%; 
            height:100%; 
            object-fit:cover;
        }
        .meta{
            padding:12px 14px; 
            display:flex; 
            align-items:center; 
            justify-content:space-between;
        }
        .title{
            font-size:1rem; 
            margin:0; 
            overflow:hidden; 
            text-overflow:ellipsis; 
            white-space:nowrap;
            color:#092c5c;
        }

        .tags{
            display:flex; 
            gap:6px;
            align-items:center;
        }
        .tag{
            font-size:0.75rem; 
            color:#666; 
            background:#f6f8fb; 
            padding:4px 8px; 
            border-radius:999px;
        }

        /* LIGHTBOX / MODAL */
        .modal{
            position:fixed; 
            inset:0; 
            display:none; 
            align-items:center; 
            justify-content:center;
            background:rgba(0,0,0,0.7); 
            z-index:200; 
            padding:20px;
        }
        .modal.open{display:flex}
        .modal-inner{
            max-width:95%; 
            max-height:95%; 
            background:transparent; 
            position:relative;
            display:flex; 
            gap:12px; 
            align-items:center;
        }
        .modal img{
            max-width:calc(100vw - 200px); 
            max-height:calc(100vh - 120px); 
            border-radius:6px;
        }

        .btn-icon{
            background:rgba(255,255,255,0.12); 
            border:none; 
            color:#fff; 
            padding:8px; 
            border-radius:6px; 
            cursor:pointer;
            font-size:20px;
        }

        .controls-vert{
            display:flex; 
            flex-direction:column; 
            gap:8px; 
            align-items:center;
        }

        .modal .info{
            color:#fff; 
            max-width:220px; 
            font-size:0.95rem;
        }

        /* EMPTY STATE */
        .empty{
            padding:40px; 
            text-align:center; 
            color:#666; 
            border:1px dashed #ddd; 
            border-radius:8px;
            margin-top:20px;
        }
    </style>

</head>
<body>

<!-- NAVBAR -->
<header class="navbar">

    <!-- Logo -->
    <div class="logo-section">
        <img src="logo.png" alt="Edmore Academy Logo" class="logo" />
        <div class="title-text">
            <h1 data-en="Edmore Academy" data-zh="艾德摩尔学院">Edmore Academy</h1>
            <p data-en="Counseling, tutoring, and courses" data-zh="升学咨询・个性辅导・学术课程">
                Counseling, tutoring, and courses
            </p>
        </div>
    </div>

    <!-- Hamburger -->
    <div class="hamburger" onclick="toggleMenu()">☰</div>

    <!-- Nav links -->
    <nav class="nav-links" id="nav-menu">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="courses.html">Courses</a>
        <a href="signup.html">Signup</a>
        <a href="gallery.html" class="active">Gallery</a>
        <a href="#" class="login-btn">Log In</a>
        <a href="#" id="lang-toggle" class="lang-toggle">中文</a>
    </nav>
</header>


<!-- PAGE CONTENT -->
<div class="wrap">

    <header class="gallery-header">
        <div style="display:flex;align-items:center;gap:12px;">
            <h1>Gallery</h1>
            <div class="stats" id="count">0 items</div>
        </div>

        <div class="controls">
            <input id="search" type="search" placeholder="Search by title or tag">
            <select id="filter">
                <option value="all">All tags</option>
                <option value="project">Project</option>
                <option value="event">Event</option>
                <option value="student">Student</option>
                <option value="staff">Staff</option>
            </select>
            <button id="clear">Clear</button>
        </div>
    </header>

    <!-- GALLERY GRID -->
    <main>
        <div class="grid" id="grid">

            <!-- Item 1 -->
            <article class="card" data-tags="project student" data-title="Workshop — Intro to JavaScript">
                <div class="thumb">
                    <img src="https://via.placeholder.com/800x533?text=Workshop+1" alt="">
                </div>
                <div class="meta">
                    <h3 class="title">Workshop — Intro to JavaScript</h3>
                    <div class="tags"><span class="tag">project</span></div>
                </div>
            </article>

            <!-- Item 2 -->
            <article class="card" data-tags="event" data-title="Open Day 2024">
                <div class="thumb">
                    <img src="https://via.placeholder.com/800x533?text=Open+Day" alt="">
                </div>
                <div class="meta">
                    <h3 class="title">Open Day 2024</h3>
                    <div class="tags"><span class="tag">event</span></div>
                </div>
            </article>

            <!-- Item 3 -->
            <article class="card" data-tags="student" data-title="Student Project A">
                <div class="thumb">
                    <img src="https://via.placeholder.com/800x533?text=Student+Project+A" alt="">
                </div>
                <div class="meta">
                    <h3 class="title">Student Project A</h3>
                    <div class="tags"><span class="tag">student</span></div>
                </div>
            </article>

            <!-- Item 4 -->
            <article class="card" data-tags="staff event" data-title="Staff Retreat">
                <div class="thumb">
                    <img src="https://via.placeholder.com/800x533?text=Staff+Retreat" alt="">
                </div>
                <div class="meta">
                    <h3 class="title">Staff Retreat</h3>
                    <div class="tags"><span class="tag">staff</span></div>
                </div>
            </article>

        </div>

        <div id="empty" class="empty" style="display:none">
            No items found. Try clearing filters.
        </div>
    </main>

</div>


<!-- LIGHTBOX MODAL -->
<div id="modal" class="modal">
    <div class="modal-inner">
        <button id="prev" class="btn-icon">&larr;</button>
        <img id="modalImg" src="" alt="">
        <button id="next" class="btn-icon">&rarr;</button>

        <div class="controls-vert" style="margin-left:12px;">
            <button id="close" class="btn-icon">✕</button>
            <div class="info" id="modalInfo">
                <h2 id="modal-title" style="margin:0 0 8px 0"></h2>
                <div id="modal-tags"></div>
            </div>
        </div>
    </div>
</div>


<!-- GALLERY SCRIPT -->
<script>
(function() {
    const grid = document.getElementById('grid');
    const cards = Array.from(grid.querySelectorAll('.card'));
    const search = document.getElementById('search');
    const filter = document.getElementById('filter');
    const clear = document.getElementById('clear');
    const countEl = document.getElementById('count');
    const empty = document.getElementById('empty');

    function normalize(s){ return (s||'').toLowerCase().trim(); }

    function updateCount(n){
        countEl.textContent = n + (n === 1 ? ' item' : ' items');
    }

    function matches(card, q, tag){
        const title = normalize(card.dataset.title);
        const tags = normalize(card.dataset.tags);
        const byQuery = !q || title.includes(q) || tags.includes(q);
        const byTag = tag === 'all' || tags.split(' ').includes(tag);
        return byQuery && byTag;
    }

    function refresh(){
        const q = normalize(search.value);
        const tag = filter.value;
        let visible = 0;
        cards.forEach(c=>{
            const ok = matches(c, q, tag);
            c.style.display = ok ? '' : 'none';
            if(ok) visible++;
        });
        updateCount(visible);
        empty.style.display = visible ? 'none' : '';
    }

    search.addEventListener('input', refresh);
    filter.addEventListener('change', refresh);

    clear.addEventListener('click', ()=>{
        search.value = '';
        filter.value = 'all';
        refresh();
    });

    /* LIGHTBOX */
    const modal = document.getElementById('modal');
    const modalImg = document.getElementById('modalImg');
    const modalTitle = document.getElementById('modal-title');
    const modalTags = document.getElementById('modal-tags');
    const closeBtn = document.getElementById('close');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');

    let visibleList = [];

    function rebuildVisible(){
        visibleList = cards.filter(c => c.style.display !== 'none');
    }

    function openLightbox(index){
        rebuildVisible();
        if(visibleList.length === 0) return;

        index = Math.max(0, Math.min(index, visibleList.length-1));
        const card = visibleList[index];
        const img = card.querySelector('img');

        modalImg.src = img.src;
        modalTitle.textContent = card.dataset.title;
        modalTags.textContent = card.dataset.tags;

        modal.dataset.index = index;
        modal.classList.add('open');
        document.body.style.overflow = 'hidden';
    }

    document.querySelectorAll('.card').forEach((c)=>{
        c.addEventListener('click', ()=>{
            rebuildVisible();
            const index = visibleList.indexOf(c);
            if(index >= 0) openLightbox(index);
        });
    });

    function closeLightbox(){
        modal.classList.remove('open');
        modalImg.src = '';
        document.body.style.overflow = '';
    }

    closeBtn.addEventListener('click', closeLightbox);
    modal.addEventListener('click', e => { if(e.target === modal) closeLightbox(); });

    prevBtn.addEventListener('click', ()=> step(-1));
    nextBtn.addEventListener('click', ()=> step(1));

    function step(n){
        const idx = Number(modal.dataset.index) || 0;
        openLightbox(idx + n);
    }

    /* Init */
    refresh();
})();
</script>

<!-- NAVBAR TOGGLE -->
<script>
function toggleMenu() {
    document.getElementById("nav-menu").classList.toggle("open");
}
</script>

</body>
</html>
